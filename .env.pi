# PiLab Raspberry Pi Environment Configuration
# Optimized for Pi's limited resources and network conditions

# =============================================================================
# SUPABASE CONFIGURATION
# =============================================================================

# Supabase API Configuration
SUPABASE_URL=http://localhost:54321
SUPABASE_STORAGE_URL=http://localhost:54324
SUPABASE_BUCKET_NAME=pilab-dev

# Supabase Authentication Keys
# IMPORTANT: These keys should be set securely and never committed to version control
SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZS1kZW1vIiwicm9sZSI6ImFub24iLCJleHAiOjE5ODM4MTI5OTZ9.CRXP1A7WOeoJeXxjNni43kdQwgnWNReilDMblYTn_I0
SUPABASE_SERVICE_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZS1kZW1vIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImV4cCI6MTk4MzgxMjk5Nn0.EGIM96RAZx35lJzdJsyH-qQwv8Hdp7fsn3W0YpN81IU

# =============================================================================
# NETWORK CONFIGURATION
# =============================================================================

# Network timeout settings (optimized for Pi's slower network)
NETWORK_TIMEOUT=60
NETWORK_CONNECT_TIMEOUT=30
NETWORK_READ_TIMEOUT=120

# Retry configuration for network operations
MAX_RETRIES=5
RETRY_DELAY=2.0
RETRY_BACKOFF_FACTOR=2.0

# Connection pooling for better performance
CONNECTION_POOL_SIZE=5
CONNECTION_POOL_MAX_RETRIES=3

# =============================================================================
# FILE HANDLING CONFIGURATION
# =============================================================================

# File upload settings (optimized for Pi's memory constraints)
MAX_FILE_SIZE=10485760  # 10MB (reduced from 25MB for Pi)
CHUNK_SIZE=8192  # 8KB chunks for streaming uploads
UPLOAD_BUFFER_SIZE=32768  # 32KB buffer for memory efficiency

# Capture directory configuration
CAPTURE_DIR=/home/pi/pilab/captures

# File validation settings
ALLOWED_MIME_TYPES=image/jpeg,image/png
MAX_FILENAME_LENGTH=255

# =============================================================================
# OFFLINE MODE CONFIGURATION
# =============================================================================

# Offline queue settings
OFFLINE_QUEUE_ENABLED=true
OFFLINE_QUEUE_PATH=/home/pi/pilab/offline_queue
OFFLINE_QUEUE_MAX_SIZE=100  # Maximum queued files
OFFLINE_QUEUE_CHECK_INTERVAL=300  # Check for connectivity every 5 minutes

# Network connectivity check settings
CONNECTIVITY_CHECK_URL=http://localhost:54321/health
CONNECTIVITY_CHECK_TIMEOUT=10
CONNECTIVITY_CHECK_INTERVAL=60  # Check every minute

# =============================================================================
# PERFORMANCE OPTIMIZATION
# =============================================================================

# Memory management
MAX_MEMORY_USAGE=512  # MB
GARBAGE_COLLECTION_INTERVAL=100  # Operations between GC calls

# CPU optimization
MAX_CONCURRENT_UPLOADS=2  # Limit concurrent operations for Pi
BACKGROUND_PROCESSING_ENABLED=true
BACKGROUND_THREAD_POOL_SIZE=3

# Caching settings
CACHE_ENABLED=true
CACHE_SIZE=50  # MB
CACHE_TTL=3600  # 1 hour

# =============================================================================
# LOGGING CONFIGURATION
# =============================================================================

# Logging settings (optimized for Pi's storage)
LOG_LEVEL=INFO
LOG_FILE_PATH=/home/pi/pilab/logs/pilab.log
LOG_MAX_SIZE=10485760  # 10MB
LOG_BACKUP_COUNT=3
LOG_ROTATION_ENABLED=true

# Performance logging
PERFORMANCE_LOGGING_ENABLED=true
PERFORMANCE_LOG_INTERVAL=300  # Log performance every 5 minutes

# =============================================================================
# SECURITY CONFIGURATION
# =============================================================================

# Security settings
KEY_ROTATION_ENABLED=false  # Disabled for Pi deployment
SECURE_KEY_STORAGE=true
KEY_EXPOSURE_PROTECTION=true

# File permissions
FILE_PERMISSIONS=644
DIRECTORY_PERMISSIONS=755

# =============================================================================
# MONITORING CONFIGURATION
# =============================================================================

# Health monitoring
HEALTH_CHECK_ENABLED=true
HEALTH_CHECK_INTERVAL=300  # Every 5 minutes
HEALTH_CHECK_TIMEOUT=30

# Resource monitoring
RESOURCE_MONITORING_ENABLED=true
MEMORY_THRESHOLD=80  # Percentage
CPU_THRESHOLD=90  # Percentage
DISK_THRESHOLD=85  # Percentage

# =============================================================================
# DEPLOYMENT CONFIGURATION
# =============================================================================

# Pi-specific deployment settings
PI_MODEL=Raspberry Pi 4B  # Update based on actual Pi model
PI_ARCHITECTURE=armv7l
PI_OS_VERSION=Raspberry Pi OS

# Service configuration
SERVICE_NAME=pilab-supabase-client
SERVICE_USER=pi
SERVICE_GROUP=pi
AUTO_START_ENABLED=true

# =============================================================================
# DEBUGGING CONFIGURATION
# =============================================================================

# Debug settings (disable in production)
DEBUG_MODE=false
VERBOSE_LOGGING=false
PROFILING_ENABLED=false

# Development settings
DEVELOPMENT_MODE=false
TEST_MODE=false 